(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b601380c"],{"66b3":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"manage-users"},[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd}},[e._v("添加成员")]),e._v(" "),r("el-input",{staticStyle:{width:"220px"},attrs:{size:"mini",placeholder:"输入用户名搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),r("el-table",{attrs:{data:e.tableData.filter((function(t){return!e.search||t.UserName.toLowerCase().includes(e.search.toLowerCase())})),border:""}},e._l(e.column,(function(t,s){return r("el-table-column",{key:s,attrs:{label:t.label,prop:t.key},scopedSlots:e._u([{key:"default",fn:function(s){return[e._t(t.key,["operation"===t.key?[s.row.edit?e._e():r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleEdit(s)}}},[e._v("修改")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(s)}}},[e._v("删除")])]:"Role"===t.key?[0===s.row[t.key]?r("el-tag",{attrs:{type:"danger"}},[e._v("管理员")]):e._e(),e._v(" "),1===s.row[t.key]?r("el-tag",{attrs:{type:"warning"}},[e._v("部门负责人")]):e._e(),e._v(" "),2===s.row[t.key]?r("el-tag",{attrs:{type:"success"}},[e._v("党组书记")]):e._e(),e._v(" "),3===s.row[t.key]?r("el-tag",[e._v("班子成员")]):e._e()]:"UserName"===t.key?[s.row.edit?r("el-input",{model:{value:s.row[t.key],callback:function(r){e.$set(s.row,t.key,r)},expression:"scope.row[item.key]"}}):e._e(),e._v(" "),s.row.edit?e._e():r("span",[e._v(e._s(s.row[t.key]))])]:[e._v("\n            "+e._s(s.row[t.key])+"\n          ")]],{scope:s})]}}],null,!0)})})),1),e._v(" "),r("add-user-dialog",{on:{close:e.queryData},model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}}),e._v(" "),r("edit-dialog",{attrs:{scope:e.scope},on:{submit:e.queryData},model:{value:e.editShow,callback:function(t){e.editShow=t},expression:"editShow"}})],1)},a=[],o=r("5530"),n=r("ad8f"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{visible:e.visible,top:"5vh",title:"添加用户","close-on-click-modal":!1},on:{close:e.close}},[r("span",{staticStyle:{"font-weight":"700"}},[e._v("请选择添加用户的角色:")]),e._v(" "),r("el-select",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini",placeholder:"请选择",clearable:""},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),1===e.role?[r("el-form",{ref:"departmentForm",attrs:{model:e.departmentForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户姓名",prop:"userName"}},[r("el-input",{model:{value:e.departmentForm.userName,callback:function(t){e.$set(e.departmentForm,"userName",t)},expression:"departmentForm.userName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[r("el-input",{model:{value:e.departmentForm.password,callback:function(t){e.$set(e.departmentForm,"password",t)},expression:"departmentForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户手机",prop:"userPhone"}},[r("el-input",{attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.departmentForm.userPhone,callback:function(t){e.$set(e.departmentForm,"userPhone",t)},expression:"departmentForm.userPhone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"部门",prop:"department"}},[r("el-input",{model:{value:e.departmentForm.department,callback:function(t){e.$set(e.departmentForm,"department",t)},expression:"departmentForm.department"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"IsAdmin"}},[r("el-checkbox",{model:{value:e.departmentForm.IsAdmin,callback:function(t){e.$set(e.departmentForm,"IsAdmin",t)},expression:"departmentForm.IsAdmin"}},[e._v("是否是管理员")])],1)],1)]:e._e(),e._v(" "),2===e.role?[r("el-form",{ref:"massForm",attrs:{model:e.massForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户姓名",prop:"userName"}},[r("el-input",{model:{value:e.massForm.userName,callback:function(t){e.$set(e.massForm,"userName",t)},expression:"massForm.userName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[r("el-input",{model:{value:e.massForm.password,callback:function(t){e.$set(e.massForm,"password",t)},expression:"massForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"所在部门",prop:"jobAddress"}},[r("el-input",{model:{value:e.massForm.jobAddress,callback:function(t){e.$set(e.massForm,"jobAddress",t)},expression:"massForm.jobAddress"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"承办人",prop:"undertaker"}},[r("el-input",{model:{value:e.massForm.undertaker,callback:function(t){e.$set(e.massForm,"undertaker",t)},expression:"massForm.undertaker"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"承办人手机",prop:"undertakerPhone"}},[r("el-input",{attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.massForm.undertakerPhone,callback:function(t){e.$set(e.massForm,"undertakerPhone",t)},expression:"massForm.undertakerPhone"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"IsAdmin"}},[r("el-checkbox",{model:{value:e.massForm.IsAdmin,callback:function(t){e.$set(e.massForm,"IsAdmin",t)},expression:"massForm.IsAdmin"}},[e._v("是否是管理员")])],1)],1)]:e._e(),e._v(" "),3===e.role?[r("el-form",{ref:"classForm",attrs:{model:e.classForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户姓名",prop:"userName"}},[r("el-input",{model:{value:e.classForm.userName,callback:function(t){e.$set(e.classForm,"userName",t)},expression:"classForm.userName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[r("el-input",{model:{value:e.classForm.password,callback:function(t){e.$set(e.classForm,"password",t)},expression:"classForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户手机",prop:"userPhone"}},[r("el-input",{attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.classForm.userPhone,callback:function(t){e.$set(e.classForm,"userPhone",t)},expression:"classForm.userPhone"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"IsAdmin"}},[r("el-checkbox",{model:{value:e.classForm.IsAdmin,callback:function(t){e.$set(e.classForm,"IsAdmin",t)},expression:"classForm.IsAdmin"}},[e._v("是否是管理员")])],1)],1)]:e._e(),e._v(" "),r("template",{slot:"footer"},[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleSubmit}},[e._v("确定")]),e._v(" "),r("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关闭")])],1)],2)},i=[],u={props:{value:{type:Boolean,default:!1}},data:function(){return{visible:!1,options:[{label:"部门负责人",value:1},{label:"党组书记",value:2},{label:"班子成员",value:3}],role:"",arr:["departmentForm","massForm","classForm"],arr1:[n["b"],n["c"],n["a"]],departmentForm:{userName:"",password:"",userPhone:"",department:"",IsAdmin:!1},classForm:{userName:"",password:"",userPhone:"",IsAdmin:!1},massForm:{userName:"",password:"",jobAddress:"",undertaker:"",undertakerPhone:"",IsAdmin:!1},rules:{userName:[{required:!0,message:"请输入用户姓名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],jobAddress:[{required:!0,message:"请输入所在部门",trigger:"blur"}],undertaker:[{required:!0,message:"请输入承办人",trigger:"blur"}],undertakerPhone:[{required:!0,message:"请输入承办人手机",trigger:"blur"}],department:[{required:!0,message:"请输入部门",trigger:"blur"}],userPhone:[{required:!0,message:"请输入手机",trigger:"blur"}]}}},watch:{value:function(e){e&&(this.visible=e)}},methods:{close:function(){this.visible=!1,this.massForm={userName:"",password:"",jobAddress:"",undertaker:"",undertakerPhone:""},this.classForm={userName:"",password:"",userPhone:""},this.departmentForm={userName:"",password:"",userPhone:"",department:""},""!==this.role&&(this.$refs[this.arr[this.role-1]].clearValidate(),this.role=""),this.$emit("input",this.visible)},handleSubmit:function(){var e=this;this.$refs[this.arr[this.role-1]].validate((function(t){t&&(e[e.arr[e.role-1]].role=e.role,e.arr1[e.role-1](e[e.arr[e.role-1]]).then((function(t){t.Success?(e.$message.success("操作成功"),e.$emit("close"),e.close()):(e.$message.warning("操作失败，请确认用户名是否唯一"),e.$emit("close"),e.close())})))}))}}},m=u,c=r("2877"),d=Object(c["a"])(m,l,i,!1,null,null,null),p=d.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{visible:e.visible,top:"5vh",title:"修改用户信息","close-on-click-modal":!1},on:{close:e.close}},[r("el-form",{attrs:{"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名称"}},[r("el-input",{model:{value:e.scope.UserName,callback:function(t){e.$set(e.scope,"UserName",t)},expression:"scope.UserName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户密码"}},[r("el-input",{model:{value:e.scope.password,callback:function(t){e.$set(e.scope,"password",t)},expression:"scope.password"}})],1)],1),e._v(" "),r("template",{slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确定")]),e._v(" "),r("el-button",{on:{click:e.close}},[e._v("关闭")])],1)],2)},b=[],v={props:{value:{type:Boolean,default:!1,required:!0},scope:{type:Object,default:function(){return[]},required:!0}},data:function(){return{visible:!1}},watch:{value:function(e){e&&(this.visible=e)}},methods:{close:function(){this.visible=!1,this.$emit("input",this.visible)},handleSubmit:function(){var e=this,t=this.scope,r=t.Id,s=t.UserName,a=t.password;Object(n["j"])({userId:r,userName:s,passWord:a||""}).then((function(t){t.Success&&e.$message.success("操作成功"),e.$emit("submit"),e.close()}))}}},h=v,k=Object(c["a"])(h,f,b,!1,null,null,null),_=k.exports,w={components:{addUserDialog:p,editDialog:_},data:function(){return{dialogShow:!1,editShow:!1,scope:{},column:[{label:"用户名称",key:"UserName"},{label:"手机号码",key:"UserPhone"},{label:"承办人",key:"Undertaker"},{label:"承办人联系方式",key:"UndertakerPhone"},{label:"所在部门",key:"JobAddress"},{label:"用户角色",key:"Role"},{label:"操作",key:"operation"}],tableData:[],search:""}},mounted:function(){this.queryData()},methods:{handleEdit:function(e){this.scope=Object(o["a"])({},e.row),this.editShow=!0},handleDelete:function(e){var t=this;this.$confirm("确定要删除该用户吗","温馨提示").then((function(){Object(n["d"])({id:e.row.Id}).then((function(e){e.Success&&(t.$message.success("操作成功"),t.queryData())}))})).catch((function(){}))},handleAdd:function(){this.dialogShow=!0},queryData:function(){var e=this;Object(n["e"])().then((function(t){e.tableData=t.data.filter((function(e){if(!e.IsDelete)return e.edit=!1,e}))}))}}},F=w,g=(r("b3e3"),Object(c["a"])(F,s,a,!1,null,null,null));t["default"]=g.exports},ad8f:function(e,t,r){"use strict";r.d(t,"f",(function(){return a})),r.d(t,"i",(function(){return o})),r.d(t,"h",(function(){return n})),r.d(t,"g",(function(){return l})),r.d(t,"e",(function(){return i})),r.d(t,"j",(function(){return u})),r.d(t,"c",(function(){return m})),r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return d})),r.d(t,"d",(function(){return p}));var s=r("b775");function a(e){return s["a"].get("/api/ShowTable/GetTable",{params:e})}function o(e){return s["a"].post("/api/ShowTable/WriteTable",e)}function n(e){return s["a"].get("/api/Admin/QueryReport",{params:e})}function l(e){return s["a"].get("/api/ShowTable/GetWriteState",{params:e})}function i(e){return s["a"].get("/api/Admin/GetUserinfo",{params:e})}function u(e){return s["a"].post("/api/Admin/UpdateUserInfo",e)}function m(e){return s["a"].post("/api/Admin/AddUserInfoDang",e)}function c(e){return s["a"].post("/api/Admin/AddUserInfoBumen",e)}function d(e){return s["a"].post("/api/Admin/AddUserInfoBan",e)}function p(e){return s["a"].post("/api/Admin/DeleteSysUserinfoId",e)}},b3e3:function(e,t,r){"use strict";var s=r("dd25"),a=r.n(s);a.a},dd25:function(e,t,r){}}]);